@using MyEMShop.Data.Entities.Product;
@model IEnumerable<MyEMShop.Data.Dtos.ProductDto.ShowProductForIndex>
@{
    ViewData["Title"] = "جستجو";
}

<div class="container">
    <form action="/Search" id="FormSubmit" method="get">
        <input type="hidden" name="pageid" value="@ViewBag.pageid.ToString()" />

        <!-- Breadcrumb Start-->
        <ul class="breadcrumb">
            <li><a href="index.html"><i class="fa fa-home"></i></a></li>
            <li><a href="search.html">جستجو</a></li>
        </ul>
        <!-- Breadcrumb End-->
        <div class="row">
            <!--Middle Part Start-->
            <div id="content" class="col-sm-12">
                <h1 class="title">جستجو </h1>
                <label>شاخص جستجو</label>
                <div class="row">
                    <div class="col-sm-4">
                        <input type="text" onchange="Change()" class="form-control" placeholder="نام کالا ..." value="" name="Filter">
                    </div>
                    @{
                        IList<ProductGroup> Groups = ViewBag.Groups as IList<ProductGroup>;
                        IList<int> selected = ViewBag.SelectedGroup as IList<int>;
                    }
                    <div class="col-sm-4">
                        <select onchange="Change()" class="form-control" name="selectedgroup">
                            @foreach (var item in Groups.Where(g => g.ParentId is null))
                            {
                                <option  value="@item.GroupId" >
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@item.GroupTitle
                                    @if (Groups.Any(p => p.ParentId == item.GroupId))
                                    {
                                        @foreach (var item2 in Groups.Where(g => g.ParentId == item.GroupId))
                                        {
                                        <option value="@item2.GroupId">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @item2.GroupTitle

                                                @if (Groups.Any(p => p.ParentId == item2.GroupId))
                                                {
                                                    @foreach (var item3 in Groups.Where(g => g.ParentId == item2.GroupId))
                                                    {
                                                <option value="@item3.GroupId">
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @item3.GroupTitle

                                                            @if (Groups.Any(p => p.ParentId == item3.GroupId))
                                                            {
                                                                @foreach (var item4 in Groups.Where(g => g.ParentId == item3.GroupId))
                                                                {
                                                        <option value="@item4.GroupId">
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @item4.GroupTitle
                                                        </option>
                                                                }
                                                            }
                                                </option>
                                                    }
                                                }
                                        </option>
                                        }
                                    }
                                </option>
                            }



                        </select>
                    </div>
                    <div class="col-sm-4">
                        <input type="submit" class="btn btn-primary" id="button-search" value="جستجو">
                    </div>
                </div>
                <br>
                <div class="product-filter">
                    <div class="row">
                        <div class="col-md-4 col-sm-5">
                            <div class="btn-group">
                                <button type="button" id="list-view" class="btn btn-default" data-toggle="tooltip" title="" data-original-title="List"><i class="fa fa-th-list"></i></button>
                                <button type="button" id="grid-view" class="btn btn-default selected" data-toggle="tooltip" title="" data-original-title="Grid"><i class="fa fa-th"></i></button>
                            </div>
                            <a href="compare.html" id="compare-total">محصولات مقایسه (0)</a>
                        </div>
                        <div class="col-sm-2 text-right">
                            <label class="control-label" for="input-sort">مرتب سازی :</label>
                        </div>
                        <div class="col-md-5 col-sm-5 text-right">
                            <select onchange="Change()" name="orderbytype" id="input-sort" class="form-control col-sm-5">
                                <option value="featured" selected="selected">همه</option>
                                <option value="latest">جدیدترین</option>
                                <option value="special">پیشنهادی</option>
                            </select>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row products-category">

                    @foreach (var item in Model)
                    {
                        <partial name="_ProductBox" model="@item" />
                    }
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 text-left">
                    <ul class="pagination">
                        <li class="active"><span>1</span></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">&gt;</a></li>
                        <li><a href="#">&gt;|</a></li>
                    </ul>
                </div>
                <div class="col-sm-6 text-right">نمایش 1 تا 12 از 15 (مجموع 2 صفحه)</div>
            </div>
        </div>
        <!--Middle Part End -->
    </form>
</div>


<script>
    function Change() {
        $("#FormSubmit").submit();
    }
</script>

